import org.jetbrains.intellij.tasks.PrepareSandboxTask

dependencies {
    compile rootProject
    compile 'org.java-websocket:Java-WebSocket:1.3.9'
    compile 'com.squareup.retrofit2:converter-gson:2.5.0'

    testCompile rootProject
}

if (!ext.has("BuildNumber"))
    ext.BuildNumber = "3.26.0.9999-2020.1"

version "$BuildNumber"
logger.lifecycle("version=$version")
println "##teamcity[buildNumber '$version']"

intellij {
    pluginName = 'azure-toolkit-for-rider'
    version = rider_version

    plugins 'terminal', 'restClient', dep_plugins_rider
}

def extensionsFrom = 'resources/dotnet'

tasks.withType(PrepareSandboxTask) {
    from(extensionsFrom, { into "$intellij.pluginName/dotnet" })
}