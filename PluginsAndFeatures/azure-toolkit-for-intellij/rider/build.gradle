dependencies {
    compile rootProject
    compile "org.java-websocket:Java-WebSocket:$webSocketVersion"
    compile "com.squareup.retrofit2:converter-gson:$retrofitVersion"

    implementation "com.cronutils:cron-utils:$cronUtilsVersion"

    testCompile rootProject
}

if (!ext.has("BuildNumber"))
    ext.BuildNumber = "3.35.0.9999-2020.2"

version "$BuildNumber"
logger.lifecycle("version=$version")
println "##teamcity[buildNumber '$version']"

def extensionsFrom = 'resources/dotnet'

intellij {
    pluginName = 'azure-toolkit-for-rider'
    version = rider_version

    plugins 'terminal', 'restClient', dep_plugins_rider
}

tasks.withType(prepareSandbox.class) {
    from(extensionsFrom, { into "$intellij.pluginName/dotnet" })
}

buildSearchableOptions.onlyIf { false }

patchPluginXml {
    sinceBuild = patchPluginXmlSinceBuild
}

test {
    useTestNG()
}

publishPlugin {
    channels publishChanel
}
